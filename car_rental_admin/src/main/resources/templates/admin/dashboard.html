<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Dashboard - Quản lý Thuê xe</title>
    <link href="/css/admin.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://kit.fontawesome.com/c1df782baf.js"></script>
</head>
<body>
<!-- Import navbar fragment -->
<div th:replace="fragments/navbar :: admin-navbar"></div>
<!-- Import sidebar fragment -->
<div class="admin-container">
    <div th:replace="fragments/sidebar :: admin-sidebar"></div>
    <main class="main-content">
        <div class="page-header">
            <h1 class="page-title">Dashboard</h1>
            <p class="page-subtitle">Tổng quan hệ thống quản lý thuê xe</p>
            <div class="breadcrumb"><span>Dashboard</span></div>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon cars">
                    <i class="fas fa-car"></i>
                </div>
                <div class="stat-info">
                    <h3 th:text="${totalCars ?: 45}">45</h3>
                    <p>Tổng số xe</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon bookings">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="stat-info">
                    <h3 th:text="${totalBookings ?: 128}">128</h3>
                    <p>Đặt xe hôm nay</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon revenue">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="stat-info">
                    <h3 th:text="${totalRevenue ?: '15.5M'}">15.5M</h3>
                    <p>Doanh thu tháng</p>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon customers">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-info">
                    <h3 th:text="${totalCustomers ?: 1250}">1,250</h3>
                    <p>Khách hàng</p>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-container">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-line"></i> Doanh thu theo tháng</h3>
                </div>
                <canvas id="revenueChart"></canvas>
            </div>

            <div class="chart-container">
                <div class="chart-header">
                    <h3><i class="fas fa-chart-pie"></i> Loại xe được thuê</h3>
                </div>
                <canvas id="carTypeChart"></canvas>
            </div>
        </div>

        <!-- Recent Activities -->
        <div class="dashboard-grid">
            <div class="recent-bookings">
                <div class="section-header">
                    <h3><i class="fas fa-clock"></i> Đặt xe gần đây</h3>
                    <a href="/admin/bookings" class="view-all">Xem tất cả</a>
                </div>
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Khách hàng</th>
                                <th>Xe</th>
                                <th>Ngày thuê</th>
                                <th>Trạng thái</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Nguyễn Văn A</td>
                                <td>Toyota Camry</td>
                                <td>22/09/2025</td>
                                <td><span class="status confirmed">Đã xác nhận</span></td>
                            </tr>
                            <tr>
                                <td>Trần Thị B</td>
                                <td>Honda City</td>
                                <td>21/09/2025</td>
                                <td><span class="status pending">Chờ xử lý</span></td>
                            </tr>
                            <tr>
                                <td>Lê Văn C</td>
                                <td>Ford Everest</td>
                                <td>20/09/2025</td>
                                <td><span class="status completed">Hoàn thành</span></td>
                            </tr>
                            <tr>
                                <td>Phạm Thị D</td>
                                <td>Hyundai Accent</td>
                                <td>19/09/2025</td>
                                <td><span class="status cancelled">Đã hủy</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="top-cars">
                <div class="section-header">
                    <h3><i class="fas fa-star"></i> Xe được thuê nhiều nhất</h3>
                </div>
                <div class="top-cars-list">
                    <div class="car-item">
                        <div class="car-image">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="car-info">
                            <h4>Toyota Camry</h4>
                            <p>45 lượt thuê</p>
                        </div>
                        <div class="car-rating">
                            <span class="rating">4.8</span>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <div class="car-item">
                        <div class="car-image">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="car-info">
                            <h4>Honda City</h4>
                            <p>38 lượt thuê</p>
                        </div>
                        <div class="car-rating">
                            <span class="rating">4.6</span>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                    <div class="car-item">
                        <div class="car-image">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="car-info">
                            <h4>Ford Everest</h4>
                            <p>32 lượt thuê</p>
                        </div>
                        <div class="car-rating">
                            <span class="rating">4.7</span>
                            <i class="fas fa-star"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h3><i class="fas fa-bolt"></i> Thao tác nhanh</h3>
            <div class="action-buttons">
                <a href="/admin/cars/add" class="action-btn add-car">
                    <i class="fas fa-plus"></i>
                    <span>Thêm xe mới</span>
                </a>
                <a href="/admin/bookings" class="action-btn view-bookings">
                    <i class="fas fa-calendar"></i>
                    <span>Xem đặt xe</span>
                </a>
                <a href="/admin/customers" class="action-btn manage-customers">
                    <i class="fas fa-users"></i>
                    <span>Quản lý KH</span>
                </a>
                <a href="/admin/reports" class="action-btn reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>Báo cáo</span>
                </a>
            </div>
        </div>
    </main>
</div>

<script>
// Revenue Chart
const revenueCtx = document.getElementById('revenueChart').getContext('2d');
const revenueChart = new Chart(revenueCtx, {
    type: 'line',
    data: {
        labels: ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'],
        datasets: [{
            label: 'Doanh thu (triệu VND)',
            data: [12, 19, 3, 5, 2, 3, 15, 8, 12, 18, 15, 20],
            borderColor: '#4CAF50',
            backgroundColor: 'rgba(76, 175, 80, 0.1)',
            tension: 0.4,
            fill: true
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                display: false
            }
        },
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});

// Car Type Chart
const carTypeCtx = document.getElementById('carTypeChart').getContext('2d');
const carTypeChart = new Chart(carTypeCtx, {
    type: 'doughnut',
    data: {
        labels: ['Sedan', 'SUV', 'Hatchback', 'Pickup'],
        datasets: [{
            data: [35, 25, 25, 15],
            backgroundColor: [
                '#FF6384',
                '#36A2EB',
                '#FFCE56',
                '#4BC0C0'
            ]
        }]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                position: 'bottom'
            }
        }
    }
});
</script>

</body>
</html>